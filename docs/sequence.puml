@startuml
title Sequence - Place order (User = Client)

actor User
participant "Cart" as Cart
participant "Order" as Order
participant "Client" as ClientDB

' User add/remove trainings
Activate Cart
User -> Cart : addTraining(training)
User <-- Cart : training added
opt Remove trainings
    User -> Cart : removeTrainings()
    User <-- Cart : training removed
end

' User Place order
User -> Cart : placeOrder()
Cart -> Order : createOrder()
Activate Order

' Check if the email exists
Order -> ClientDB : checkEmail(email)
Activate ClientDB
alt client exists
    ClientDB --> Order : return existing client

else Client doesn't exist
    ClientDB -> ClientDB : createClient(email)
    ClientDB --> Order : return client created
    note right
        enter first name, last name, address, phone number
    end note
end
Deactivate ClientDB

' Associate trainings to orders

Order --> User : confirm order
Deactivate Order
' Clean the cart
Cart -> Cart : emptyCart()
Cart --> Cart : cart emptied
Deactivate Cart


@enduml
